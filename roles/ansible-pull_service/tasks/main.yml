- name: Setup {{ service_name }} ansible-pull service
  template:
    src: ansible-pull.service.j2
    dest: "/lib/systemd/system/{{ service_name }}.service"
    mode: 644

- name: Setup {{ service_name }} ansible-pull timer
  template:
    src: ansible-pull.timer.j2
    dest: "/lib/systemd/system/{{ service_name }}.timer"
    mode: 644
  notify:
    - reload systemctl

- name: Start {{ service_name }} ansible-pull timer
  service:
    name: "{{ service_name }}.timer"
    state: started
    enabled: yes
